/*
 * Plugin Name: 3dRote
 *  爱特工作室  Waydrow
 * Mail: waydrow@163.com
 */

(function (e) {
    e.fn.extend({
        rote3D: function (t) {
            new e.rote3D(this, t);
            return;
        }
    });
    e.rote3D = function (t, n) {
        function h(e, t) {
            u = e;
            a = t.imagePath;
            i = t.totalImages;
            c = t.imageExtension;
        }

        setInterval(function () {
            if (num < 2) num = i;
            e(u).css("background-image", "url( " + a + num + "." + c + " )");
            num--;
        }, 70);

        function v() {
            var t = a + "38." + c;
            e(u).css("background-image", "url(" + t + ")");
            e("<img/>").attr("src", t);
            for (var n = 2; n <= i; n++) {
                t = a + n + "." + c;
                e(u).append("<img src='" + t + "' style='display:none;'>");
                e("<img/>").attr("src", t).css("display", "none").load(function () {
                    l++;
                    if (l >= i) {
                        e(f).removeClass("onLoadingDiv");
                        e(f).text("")
                    }
                })
            }
        }

        function m() {
            e("head").append("<style type='text/css'>.onLoadingDiv{background-color:#00FF00;opacity:0.5;text-align:center;font-size:2em;color:#000;}</style>")
        }

        var r = 1,
            i = 0,
            o = 0,
            u, a, f = "#loadingDiv",
            l = 1,
            num = 1,
            c = "png";
        h(t, n);
        m();
        e(u).html("<div id='loadingDiv' style='height:100%;width:100%;' class='onLoadingDiv'>Loading...</div>");
        v();
    }
})(jQuery)